<div class="min-h-full flex items-center justify-center p-6">
    <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-4xl">
        <p-table [value]="trips.value()?.items || []">
            <ng-template pTemplate="header">
                <tr>
                    <th scope="col">Trip Name</th>
                    <th scope="col">City</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">End Date</th>
                    <th scope="col"></th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-trip>
                <tr>
                    <td>{{ trip.name }}</td>
                    <td>{{ trip.city }}</td>
                    <td>{{ trip.startAt | date: `dd-MM-yyyy` }}</td>
                    <td>{{ trip.endAt | date: `dd-MM-yyyy` }}</td>
                    <td>
                        <i
                            (click)="showDeleteDialog(trip.id)"
                            class="pi pi-trash cursor-pointer"
                        ></i>
                        <p-dialog
                            header="You are about to delete ${trip.name}"
                            [modal]="true"
                            [(visible)]="isDialogVisible"
                        >
                            <div>
                                <p-button
                                    label="Cancel"
                                    severity="secondary"
                                    icon="pi pi-check"
                                    [rounded]="true"
                                    size="small"
                                    (click)="isDialogVisible = false"
                                />
                                <p-button
                                    icon="pi pi-check"
                                    [rounded]="true"
                                    size="small"
                                    (onClick)="deleteTrip(trip.id)"
                                />
                            </div>
                        </p-dialog>
                    </td>
                </tr>
            </ng-template>

            <ng-template #emptymessage>
                @if (trips.error()) {
                    <p>Error while loading trips</p>
                } @else if (trips.isLoading()) {
                    <p>Loading trips...</p>
                } @else {
                    <p>No trips available.</p>
                }
            </ng-template>
        </p-table>

        <div>
            <p-paginator
                (onPageChange)="onPageChange($event)"
                [first]="(page() - 1) * pageSize"
                [rows]="pageSize"
                [totalRecords]="totalRecords()"
                [showCurrentPageReport]="true"
                [showPageLinks]="false"
                [showJumpToPageDropdown]="false"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords}"
            />
        </div>
    </div>
</div>
